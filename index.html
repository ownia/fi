<!DOCTYPE html>
<html>

<head>
    <title>Fi</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>

<body>
    <div>
        <div style="text-align:center;">
            <input type="text" placeholder="Please select a file" id="actual-file" disabled="disabled" />
            <input type="button" value="Choose a file" id="select-file" />
        </div>
        <br><br>
        <div>
            <textarea id="content-editor" rows="5"></textarea>
            <textarea id="content-editor2" rows="1"></textarea>
            <textarea id="content-editor3" rows="1"></textarea>
            <textarea id="content-editor4" rows="1"></textarea>
        </div>
        <br>
        <input type="button" id="clear" value="Clear file" />
        <input type="button" id="clear2" value="Clear file" />
    </div>

    <script>
        const {
            dialog
        } = require('electron').remote;

        var fs = require('fs');

        document.getElementById('select-file').addEventListener('click', function () {
            dialog.showOpenDialog(function (fileNames) {
                if (fileNames === undefined) {
                    console.log("No file selected");
                } else {
                    document.getElementById("actual-file").value = fileNames[0];
                    var strFileName = fileNames[0].substring(fileNames[0].lastIndexOf("\\") + 1);
                    var arr1 = strFileName.split(".");

                    document.getElementById("content-editor").value = strFileName;

                    var title = arr1[0];
                    var type = arr1[arr1.length - 1];
                    var team = arr1[arr1.length - 2];
                    var team1 = team.split("-");
                    var team2 = team1[team1.length - 1];

                    var key = arr1.findIndex("Bluray");

                    let value = arr1.find(function (currentValue, currentIndex, currentArray) {
                        // console.log(currentValue, currentIndex, currentArray);
                        if (currentValue === "Bluray") {
                            return true;
                        }
                    });


                    document.getElementById("content-editor2").value = type;
                    document.getElementById("content-editor3").value = key;
                    document.getElementById("content-editor4").value = team2;

                }
            });
        }, false);

        document.getElementById('clear').addEventListener('click', function () {
            document.getElementById("content-editor").value = "";
        });

        document.getElementById('clear2').addEventListener('click', function () {
            document.getElementById("content-editor2").value = "";
        });
    </script>
</body>

</html>